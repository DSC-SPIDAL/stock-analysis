# stock-analysis

## Stock Analysis Project

Download the source from https://github.com/iotcloud/stock-analysis and build.

```
git clone https://github.com/iotcloud/stock-analysis.git
cd stock-analysis
mvn clean install
```

## DAMDS Project

Download the project from https://github.com/DSC-SPIDAL/damds.git and build.

```
git clone https://github.com/DSC-SPIDAL/damds.git
cd damds
mvn clean install
```

## MDSasChisq

Download the project from https://github.iu.edu/skamburu/MDSasChisq

```
git clone git@github.iu.edu:skamburu/MDSasChisq.git
cd MDSasChisq
mvn clean install
```

# Stock Workflow

We first pre-process the data to create distance matrix files that are required by the MDS algorithm. Then we apply the MDS algorithm to these files. After this we do some post processing to create the final output.

## Pre-Processing

### FileBreaker

FileBreaker program is used to break large stock files in to smaller files for processing. For example if we are interested in processing yearly data the stock file can be broken by year to multiple files.

#### Format of stock files

```
PermNo,Date,StockSym,Price,Volume
```
These stock files are used to create vector files. This step isn't mandatory and vector generator can be used to create vector files directly from the stock file as wel..

### PVectorGenerator

This program creates a file with stocks in a vector format. Each row of the file contains stock identifier, stock cap and day prices as a vector.

```
PermNo,Cap,prices.....
```

### DistanceCalculator

Produces a distance file given the vector files. Various measures like correlation, correlation squared, euclidean are implemented as distance measures.

### WeightCalculator

Produces a weight matrix file given the vector files.

## Algorithm

We use the MPI version of the MDS algorithm given above to map the distances to 3d space.

## Post-Processing

### HistoGram

Create a Histogram from the vector files. This histogram can be used to label the classes

### PointRotation

This program is used to create a common set of points across all the years to rotate the points.

### MDSasChisq

We use this program to transform the point files generated by the MDS to align with a global points.

### LabelApply

Apply labels to the final rotated points.

## How to Run

There are files in bin directory that can be used to run the programs.

To run the pre-process steps, use the file preproc.sh. You can change the parameters in this file.

```
sbatch preproc.sh
```

To run the damnds algorithm use the stocks.sh and stocks_weight.sh files.

stocks.sh will run the un-weighted mds algorithm

```
sh stocks.sh
```

stocks_weight.sh will run the weighted mds algorithm

```
sh stocks_weight.sh
```

To run the post-processing steps, use the postproc.sh

```
sh postproc.sh
```
